var avadaLiveSearch=function(){var s=[];avadaLiveSearchVars.live_search&&jQuery(".fusion-live-search-input").each(function(){var e,a=jQuery(this),i=a.closest(".fusion-live-search"),t=i.find(".fusion-search-button"),o=i.find(".fusion-search-submit"),r=i.find(".fusion-search-results"),n=i.find('input[name="post_type[]"]'),d=i.find('input[name="search_limit_to_post_titles"]'),c=r.closest(".fusion-builder-row"),u=i.closest(".fusion-header");function l(s){var e="";r.html(""),r.removeClass("suggestions-empty"),r.addClass("suggestions-added"),h("add"),jQuery.isEmptyObject(s)?(r.addClass("suggestions-empty"),e+='<div class="fusion-search-result">'+avadaLiveSearchVars.no_search_results+"</div>",r.append(e)):jQuery.each(s,function(s,a){e="",e+='<a class="fusion-search-result" href="'+a.post_url+'" title="'+a.title+'">',a.image_url&&(e+='<div class="fusion-search-image"><img class="fusion-search-image-tag" src="'+a.image_url+'" alt="Post Thumb'+a.id+'"/></div>'),e+='<div class="fusion-search-content">',e+='<div class="fusion-search-post-title">'+a.title+"</div>",a.type&&(e+='<div class="fusion-search-post-type">'+a.type+"</div>"),e+="</div>",e+="</a>",r.append(e)})}function v(){var e,t;if(i=a.closest(".fusion-live-search"),e=a.val(),e+=(t=function(){var s=[];return n.each(function(){s.push(this.value)}),s})().toString(),avadaLiveSearchVars.min_char_count<=e.length){if(void 0!==s[e])return void l(s[e]);i.find(".fusion-slider-loading").show(),i.find(".fusion-search-submit").css("color","transparent"),o.css("color","transparent"),jQuery.ajax({url:avadaLiveSearchVars.ajaxurl,type:"post",data:{action:"live_search_retrieve_posts",search:a.val(),perPage:avadaLiveSearchVars.per_page,show_feat_img:avadaLiveSearchVars.show_feat_img,display_post_type:avadaLiveSearchVars.display_post_type,post_type:t(),searchLimiPostTitles:d.val()},success:function(a){s[e]=a,l(a),i.find(".fusion-slider-loading").hide(),o.css("color",o.attr("data-color"))}})}else i.find(".fusion-slider-loading").hide(),o.css("color",o.attr("data-color")),r.removeClass("suggestions-added"),h("remove")}function h(s){c.length&&("add"===s?c.css("z-index","11"):c.css("z-index","")),u.length&&("add"===s?u.addClass("live-suggestion-added"):u.removeClass("live-suggestion-added"))}o.attr("data-color",o.css("color")),a.on("focusin",function(){avadaLiveSearchVars.min_char_count<=jQuery(this).val().length&&r.children(".fusion-search-result").length&&(r.addClass("suggestions-added"),h("add"))}),a.on("focusout",function(){r.is(":hover")||t.is(":hover")||(r.removeClass("suggestions-added"),h("remove"))}),jQuery(t,r).on("mouseleave",function(){a.is(":focus")||(r.removeClass("suggestions-added"),h("remove"))}),a.on("keyup",function(){clearTimeout(e),e=setTimeout(v,500)}),a.on("keydown",function(){clearTimeout(e)})})};jQuery(document).ready(function(){avadaLiveSearch()});